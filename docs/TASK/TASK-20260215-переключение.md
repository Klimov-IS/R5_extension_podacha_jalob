# TASK — Переключение вкладок отзывов WB при подаче жалоб (Rating5 Extension)

## Контекст
В ЛК Wildberries отзывы доступны на 2 вкладках:
- **«Ждут ответа»**
- **«Есть ответ»**

Мы **не управляем** ответами — вкладки нужны только как два источника списка отзывов для подачи жалоб. Чаще всего нужные отзывы лежат в **«Есть ответ»**, но часть может оставаться в **«Ждут ответа»**.

## Проблема
Сейчас расширение подаёт жалобы только в рамках текущей вкладки. Приходится вручную:
1) останавливать автоподачу  
2) переключать вкладку  
3) снова запускать  
→ теряем время на загрузки/переключения, падает скорость и стабильность процесса.

## Цель
Научить расширение **автоматически переключаться между вкладками** во время обработки **одного артикула**, чтобы расширение само:
- подало жалобы на текущей вкладке,
- проверило, остались ли ещё отзывы для подачи,
- при необходимости переключилось на вторую вкладку и продолжило,
- повторяло цикл до полного окончания отзывов по артикулу.

## Что нужно сделать (MVP)
1) **Добавить логику цикла по вкладкам** для одного артикула:
   - стартуем на текущей вкладке (обычно «Есть ответ»),
   - выполняем существующий пайплайн подачи жалоб (без изменений),
   - если на вкладке больше нет отзывов/кнопок подачи по этому артикулу → переключаемся на другую вкладку,
   - продолжаем, пока на обеих вкладках не будет “нечего подавать”.

2) **Реализовать переключение вкладок по HTML-шаблонам**
   - Я приложу 2 HTML-файла (дам названия в задаче) — они отражают DOM обеих вкладок.
   - Селекторы/таблицы одинаковые, различие по сути только в активной вкладке.
   - В расширении нужен модуль `tabs` (или аналог), который:
     - определяет текущую вкладку,
     - кликает на нужную вкладку,
     - ждёт окончания загрузки/перерендера списка.

3) **Добавить условия остановки**
   - если по артикулу **нет отзывов для подачи на обеих вкладках** → корректно завершить обработку артикула.
   - если вкладка не переключилась/список не обновился за таймаут → safe-stop + лог.

## Ограничения
- **Не менять существующую логику подачи жалоб** (селекторы, формы, действия) — только добавить переключение вкладок и цикл.
- Никаких новых UI/настроек не требуется.

## Definition of Done
- Расширение, запущенное на одном артикуле, **само обходит обе вкладки** и подаёт жалобы везде, где они есть.
- Не требует ручных остановок/перезапусков при переключении вкладок.
- Есть базовые логи: `tab=...`, `switch_to=...`, `found=N`, `submitted=N`, `done_reason=...`.

## Notes / Inputs
- HTML-файлы двух вкладок: **(я добавлю названия файлов тут в задаче)**
- Предпочтение по сценарию: начинать с **«Есть ответ»**, затем проверять **«Ждут ответа»**.
