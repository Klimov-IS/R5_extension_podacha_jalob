# Chrome Extension - Backend Integration

**–°—Ç–∞—Ç—É—Å:** ‚úÖ Backend API —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
**–î–∞—Ç–∞:** 2026-01-28

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```
–†–∞—Å—à–∏—Ä–µ–Ω–∏—è/R5 –ø–æ–¥–∞—á–∞ –∂–∞–ª–æ–±/
‚îÇ
‚îú‚îÄ‚îÄ README_INTEGRATION.md          # üëà –í—ã –∑–¥–µ—Å—å - –æ–±–∑–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ QUICK_START.md                 # ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç
‚îú‚îÄ‚îÄ BACKEND_API_READY.md           # üìö –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
‚îÇ
‚îú‚îÄ‚îÄ docs/                          # –ò—Å—Ö–æ–¥–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ API_SPECIFICATION.md       # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ API_HANDOFF.md            # –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ API_README.md             # –û–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
‚îÇ
‚îî‚îÄ‚îÄ src/                          # –ö–æ–¥ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (–≤–∞—à–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
```

---

## üéØ –ß—Ç–æ –ì–æ—Ç–æ–≤–æ –Ω–∞ Backend

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **API Endpoints (2 —à—Ç)**
   - `GET /api/stores/:storeId/complaints` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∂–∞–ª–æ–±
   - `POST /api/stores/:storeId/reviews/:reviewId/complaint/sent` - –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é

2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - Bearer Token –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
   - Rate limiting: 100 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
   - Store-scoped access control

3. **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
   - Production —Å–µ—Ä–≤–µ—Ä: http://158.160.217.236
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL (Yandex Cloud)
   - CORS –¥–ª—è chrome-extension://*

4. **–î–∞–Ω–Ω—ã–µ –¥–ª—è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**
   - API Token: `d794d4408ef0955a693afaa913dd195ddd25f447e94d098c2f6e0155aa2b0038`
   - Store ID: `ss6Y8orHTX6vS7SgJl4k`
   - Store Name: 20Grace –ò–ü –®–∏—Ä–∞–∑–¥–∞–Ω–æ–≤–∞ –ì. –ú.

---

## üöÄ –ù–∞—á–∞–ª–æ –†–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ—á–∏—Ç–∞–π—Ç–µ QUICK_START.md

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∫–æ–¥–∞ - **5 –º–∏–Ω—É—Ç**

### 2. –ò–∑—É—á–∏—Ç–µ BACKEND_API_READY.md

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API:
- –û–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö endpoint'–æ–≤
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ì–æ—Ç–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API

```bash
# –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –≤ –∫–æ–Ω—Å–æ–ª–∏
curl -H "Authorization: Bearer d794d4408ef0955a693afaa913dd195ddd25f447e94d098c2f6e0155aa2b0038" \
     "http://158.160.217.236/api/stores/ss6Y8orHTX6vS7SgJl4k/complaints?take=5"
```

---

## üìä –°—Ç–∞—Ç—É—Å –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | Backend | Extension |
|-----------|---------|-----------|
| API Endpoints | ‚úÖ –ì–æ—Ç–æ–≤–æ | üü° –í —Ä–∞–±–æ—Ç–µ |
| –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | ‚úÖ –ì–æ—Ç–æ–≤–æ | üü° –í —Ä–∞–±–æ—Ç–µ |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –ì–æ—Ç–æ–≤–æ | - |
| Rate Limiting | ‚úÖ –ì–æ—Ç–æ–≤–æ | üü° –í —Ä–∞–±–æ—Ç–µ |
| –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –ü—Ä–∏–º–µ—Ä—ã | üü° –í —Ä–∞–±–æ—Ç–µ |
| –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ WB | - | üü° –í —Ä–∞–±–æ—Ç–µ |
| UI Extension | - | üü° –í —Ä–∞–±–æ—Ç–µ |

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- üü° –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- ‚è≥ –û–∂–∏–¥–∞–µ—Ç
- ‚ùå –ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ

---

## üîÑ Workflow –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Backend API    ‚îÇ
‚îÇ  (–≥–æ—Ç–æ–≤–æ ‚úÖ)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ REST API
         ‚îÇ (GET/POST)
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Chrome         ‚îÇ
‚îÇ  Extension      ‚îÇ
‚îÇ  (–≤ —Ä–∞–±–æ—Ç–µ üü°)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ Content Script
         ‚îÇ + DOM Manipulation
         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Wildberries    ‚îÇ
‚îÇ  Website        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –≠—Ç–∞–ø—ã –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. ‚úÖ **Backend –≥–æ—Ç–æ–≤** - API —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç, —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
2. üü° **Extension Development** - –í–∞—à–∞ –∑–∞–¥–∞—á–∞:
   - –ü–æ–ª—É—á–∏—Ç—å –∂–∞–ª–æ–±—ã —á–µ—Ä–µ–∑ API
   - –†–∞—Å–ø–∞—Ä—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
   - –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—É WB
   - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∂–∞–ª–æ–±—É
   - –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é —á–µ—Ä–µ–∑ API

---

## üí° –ö–ª—é—á–µ–≤—ã–µ –ú–æ–º–µ–Ω—Ç—ã

### –§–æ—Ä–º–∞—Ç –î–∞—Ç—ã

**Backend –æ—Ç–¥–∞–µ—Ç:** ISO 8601 (`"2026-01-23T08:38:44.000Z"`)
**WB —Ç—Ä–µ–±—É–µ—Ç:** DD.MM.YYYY (`"23.01.2026"`)

**–í–∞—à–∞ –∑–∞–¥–∞—á–∞:** –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç

```javascript
// –ì–æ—Ç–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ BACKEND_API_READY.md
function formatDateForWB(isoString) {
  const date = new Date(isoString);
  const day = String(date.getDate()).padStart(2, '0');
  const month = String(date.getMonth() + 1).padStart(2, '0');
  const year = date.getFullYear();
  return `${day}.${month}.${year}`;
}
```

### –§–æ—Ä–º–∞—Ç complaintText

**Backend –æ—Ç–¥–∞–µ—Ç:** Markdown —Å JSON
```
```json
{"reasonId":"11","reasonName":"...","complaintText":"..."}
```
```

**–í–∞—à–∞ –∑–∞–¥–∞—á–∞:** –†–∞—Å–ø–∞—Ä—Å–∏—Ç—å JSON

```javascript
// –ì–æ—Ç–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤ BACKEND_API_READY.md
function parseComplaintText(text) {
  const match = text.match(/```json\n(.*?)\n```/s);
  return JSON.parse(match[1]);
}
```

### –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

POST `/complaint/sent` –±–µ–∑–æ–ø–∞—Å–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑:
- –ü–µ—Ä–≤—ã–π —Ä–∞–∑: `{"message": "Complaint marked as sent"}`
- –ü–æ–≤—Ç–æ—Ä–Ω–æ: `{"message": "Complaint already marked as sent"}`

–≠—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Health Check
```bash
curl http://158.160.217.236/api/health
```

### –ü–æ–ª—É—á–∏—Ç—å –ñ–∞–ª–æ–±—ã
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
     "http://158.160.217.236/api/stores/YOUR_STORE_ID/complaints?take=10"
```

### –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—É—é
```bash
curl -X POST \
     -H "Authorization: Bearer YOUR_TOKEN" \
     "http://158.160.217.236/api/stores/YOUR_STORE_ID/reviews/REVIEW_ID/complaint/sent"
```

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –í–æ–ø—Ä–æ—Å—ã –ø–æ Backend API

- –°–º–æ—Ç—Ä–∏—Ç–µ **BACKEND_API_READY.md** - —Ä–∞–∑–¥–µ–ª "–û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫"
- Production Server: http://158.160.217.236
- GitHub: https://github.com/Klimov-IS/R5-Saas-v-2.0

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **Rate Limit:** 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ header `X-RateLimit-Remaining`
   - –ü—Ä–∏ 429 –æ—à–∏–±–∫–µ - –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —á–µ—Ä–µ–∑ 60 —Å–µ–∫—É–Ω–¥

2. **–ü–µ—Ä–≤–æ–µ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:** ~100ms –∑–∞–¥–µ—Ä–∂–∫–∞
   - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Yandex Cloud (ru-central1-d)
   - –ù–æ—Ä–º–∞–ª—å–Ω–∞—è latency: 50-100ms

3. **CORS:** –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è chrome-extension://*
   - –†–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Extension
   - –ù–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞–ø—Ä—è–º—É—é (security)

---

## üìà –î–∞–ª—å–Ω–µ–π—à–∏–µ –®–∞–≥–∏

### –î–ª—è Extension Team

1. [x] Backend API —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç
2. [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞
3. [ ] **–í–∞—à–∞ –∑–∞–¥–∞—á–∞:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API
4. [ ] **–í–∞—à–∞ –∑–∞–¥–∞—á–∞:** –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –Ω–∞ WB
5. [ ] **–í–∞—à–∞ –∑–∞–¥–∞—á–∞:** UI/UX —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
6. [ ] –°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
7. [ ] Production –∑–∞–ø—É—Å–∫

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ü–ª–∞–Ω

**Week 1: API Integration**
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –≤ chrome.storage
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –∂–∞–ª–æ–±
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–º–µ—Ç–∫—É –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–π
- –ù–∞–ø–∏—Å–∞—Ç—å —É—Ç–∏–ª–∏—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞

**Week 2: WB Integration**
- Content script –¥–ª—è WB —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –∂–∞–ª–æ–±—ã
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∂–∞–ª–æ–±—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ WB

**Week 3: Polish & Testing**
- UI/UX —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Backend API –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ endpoint'—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã. –ù–∞—á–∏–Ω–∞–π—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é - backend –≤–∞—Å –Ω–µ –ø–æ–¥–≤–µ–¥–µ—Ç.

**–ù–∞—á–Ω–∏—Ç–µ —Å:** [QUICK_START.md](QUICK_START.md)

–£–¥–∞—á–∏! üöÄ

---

**P.S.** –ï—Å–ª–∏ –Ω–∞–π–¥–µ—Ç–µ –±–∞–≥–∏ –∏–ª–∏ —É –≤–∞—Å –±—É–¥—É—Ç –≤–æ–ø—Ä–æ—Å—ã –ø–æ API - —Å–æ–æ–±—â–∏—Ç–µ backend –∫–æ–º–∞–Ω–¥–µ. –ú—ã –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ –ø–æ–º–æ–∂–µ–º! üë®‚Äçüíª
